syntax="proto3";
package fast;
message Element {
__COUNTER__
#include "ElementType.proto"
#include "SmaliType.proto"
   Kind kind = __COUNTER__;
   string text = __COUNTER__;
   string tail = __COUNTER__;
   int32 pos = __COUNTER__;
   int32 length = __COUNTER__;
   repeated Element child = __COUNTER__;
   oneof extra {
     Unit unit = __COUNTER__;
     Literal literal = __COUNTER__;
   }
   message Unit {
#include "Unit.proto"
   }
   message Literal {
#include "Literal.proto"
   }
   int32 line = __COUNTER__;
   int32 column = __COUNTER__;
}

message Delta {
   string src = 1;
   string dst = 2;
   repeated Diff diff = 3;
   message Diff {
	enum DeltaType {
	    MATCH = 0;
	    ADD = 1;
	    DEL = 2;
	    MOVE = 3;
	    UPDATE = 4;
        }
	DeltaType type = 1;
   	oneof delta {
		Match match = 2;
		Add add = 3;
		Del del = 4;
		Move move = 5;
		Update update = 6;
	}
	message Match {
		int32 src = 1;
		int32 dst = 2;
	}
	message Add {
		int32 src = 1;
		int32 dst = 2;
		int32 position = 3;
	}
	message Del {
		int32 src = 1;
	}
	message Move {
		int32 src = 1;
		int32 dst = 2;
		int32 position = 3;
	}
	message Update {
		int32 src = 1;
		string label = 2;
	}
   }
}

message Pairs {
   message Pair {
	enum CloneType {
	  MAYBE = 0;
	  YES = 1;
	  NO = 2;
	}
	string project = 1;
	Diff left = 2;
	Diff right = 3;
	CloneType type = 4;
	message Diff {
		int32 left_line = 1;
		int32 left_column = 2;
		int32 right_line = 3;
		int32 right_column = 4;
		Element old_code = 5;
		Element new_code = 6;
	}
   } 
   repeated Pair pair = 1;
}
